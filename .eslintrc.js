require('@rushstack/eslint-patch/modern-module-resolution');

module.exports = {
  root: true,
  env: {
    node: true,
    browser: true,
    es2021: true,
  },
  extends: [
    'plugin:vue/vue3-essential',
    'eslint:recommended',
    '@vue/eslint-config-typescript',
    '@vue/eslint-config-prettier/skip-formatting',
  ],
  overrides: [
    {
      files: ['cypress/e2e/**/*.{cy,spec}.{js,ts,jsx,tsx}'],
      extends: ['plugin:cypress/recommended'],
    },
  ],
  parserOptions: {
    ecmaVersion: 2021,
    sourceType: 'module',
  },
  rules: {
    semi: [2, 'never'],
    indent: [2, 4, { SwitchCase: 1 }],
    'no-multi-spaces': 2,
    'space-unary-ops': [2, { words: true, nonwords: false }],
    'space-infix-ops': 2,
    'space-before-blocks': [2, 'always'],
    'no-mixed-spaces-and-tabs': 2,
    'no-multiple-empty-lines': [2, { max: 1 }],
    'no-trailing-spaces': 2,
    'no-whitespace-before-property': 2,
    'no-irregular-whitespace': 2,
    'space-in-parens': [2, 'never'],
    'comma-dangle': [2, 'never'],
    'array-bracket-spacing': [2, 'never'],
    'object-curly-spacing': [2, 'never'],
    'max-len': ['error', { code: 120 }],
    'operator-linebreak': [2, 'before'],
    'comma-style': [2, 'last'],
    'no-extra-semi': 2,
    curly: [2, 'all'],
    'key-spacing': [2, { beforeColon: false, afterColon: true }],
    'comma-spacing': [2, { before: false, after: true }],
    'semi-spacing': [2, { before: false, after: true }],
    camelcase: [1, { properties: 'always' }],
    'new-cap': ['error', { newIsCap: true, capIsNew: false }],
    'spaced-comment': [2, 'always'],
    'no-inline-comments': 2,
    eqeqeq: [2, 'always', { null: 'ignore' }],
    'no-else-return': [1, { allowElseIf: false }],
    'no-loop-func': 2,
    'no-restricted-syntax': [
      1,
      {
        selector: "BinaryExpression[operator='instanceof']",
        message: "Use 'instanceof' for object type detection.",
      },
      {
        selector: "BinaryExpression[operator='typeof']",
        message: "Use 'typeof' for type detection.",
      },
      {
        selector: "CallExpression[callee.name='parseInt']",
        message:
          'Use Math.floor, Math.round, or Math.ceil instead of parseInt to remove decimal points.',
      },
    ],
    'no-implicit-coercion': [1, { allow: ['!!'] }],
    radix: [2, 'always'],
    quotes: [2, 'single'],
    'no-array-constructor': 2,
    'max-lines-per-function': [
      1,
      {
        max: 50,
        skipComments: true,
        skipBlankLines: true,
        IIFEs: true,
      },
    ],
    'max-params': [1, 6],
    'no-eval': 2,
    'prefer-const': 1,
    'no-var': 1,
    'prefer-destructuring': [1, { object: true, array: false }],
    'prefer-template': 1,
    'template-curly-spacing': [2, 'never'],
    'no-duplicate-imports': 2,
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
  },
  globals: {
    withDefaults: true,
    defineExpose: true,
    defineEmits: true,
    defineProps: true,
  },
};
